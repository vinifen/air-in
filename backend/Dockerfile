#backend
FROM node:23-alpine3.20

WORKDIR /backend

COPY . .

ENV SERVER_HOSTNAME: ${BACK_DOMAIN}
ENV SERVER_PORT: ${BACK_PORT}
ENV CORS_ORIGIN: ${WEB_URL} 

ENV WEATHER_API_KEY: ${WEATHER_API_KEY}
ENV JWT_SESSION_KEY: ${JWT_SESSION_KEY}
ENV JWT_REFRESH_KEY: ${JWT_REFRESH_KEY}

ENV DB_HOST: ${DB_HOST} 
ENV DB_USER: ${DB_USER} 
ENV DB_PASSWORD: ${DB_PASSWORD} 
ENV DB_NAME: ${DB_NAME} 

ENV COOKIE_SECURE: ${COOKIE_SECURE}

RUN rm -rf node_modules
RUN npm install

RUN npm run build

CMD npm run start


